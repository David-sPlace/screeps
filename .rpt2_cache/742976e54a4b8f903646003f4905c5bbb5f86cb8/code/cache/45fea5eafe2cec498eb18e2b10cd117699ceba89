{"code":"export var TaskState;\r\n(function (TaskState) {\r\n    TaskState[TaskState[\"PENDING\"] = 0] = \"PENDING\";\r\n    TaskState[TaskState[\"INIT\"] = 1] = \"INIT\";\r\n    TaskState[TaskState[\"START\"] = 2] = \"START\";\r\n    TaskState[TaskState[\"PRE_RUN\"] = 3] = \"PRE_RUN\";\r\n    TaskState[TaskState[\"PREP\"] = 4] = \"PREP\";\r\n    TaskState[TaskState[\"IN_PROGRESS\"] = 5] = \"IN_PROGRESS\";\r\n    TaskState[TaskState[\"POST_RUN\"] = 6] = \"POST_RUN\";\r\n    TaskState[TaskState[\"FINISHED\"] = 7] = \"FINISHED\";\r\n})(TaskState || (TaskState = {}));\r\nvar Task = /** @class */ (function () {\r\n    function Task(taskInfo) {\r\n        this.request = taskInfo;\r\n    }\r\n    Task.toStatus = function (state) {\r\n        if (state == TaskState.PENDING)\r\n            return \"PENDING\";\r\n        if (state == TaskState.INIT)\r\n            return \"INIT\";\r\n        if (state == TaskState.START)\r\n            return \"START\";\r\n        if (state == TaskState.PREP)\r\n            return \"PREP\";\r\n        if (state == TaskState.PRE_RUN)\r\n            return \"PRE_RUN\";\r\n        if (state == TaskState.IN_PROGRESS)\r\n            return \"IN_PROGRESS\";\r\n        if (state == TaskState.POST_RUN)\r\n            return \"POST_RUN\";\r\n        if (state == TaskState.FINISHED)\r\n            return \"FINISHED\";\r\n        return state + \" is unknown...\";\r\n    };\r\n    Task.prototype.run = function () {\r\n        console.log(\"RUN: \" + this.request.name + \" + \" + this.request.assignedTo + \" + \" + Task.toStatus(this.request.status) + \" \");\r\n        if (Game.creeps[this.request.assignedTo] == undefined)\r\n            throw \"it happened! task.run\";\r\n        var oldStatus = this.request.status;\r\n        switch (this.request.status) {\r\n            // case TaskState.PENDING: this.pending();\r\n            case TaskState.INIT:\r\n                this.init();\r\n                break;\r\n            case TaskState.PREP:\r\n                this.prep();\r\n                break;\r\n            case TaskState.START:\r\n                this.start();\r\n                break;\r\n            case TaskState.IN_PROGRESS:\r\n                this.continue();\r\n                break;\r\n            case TaskState.FINISHED: {\r\n                console.log(\"finishing.\");\r\n                this.finish();\r\n                // CreepTaskQueue.finish(this.request.assignedTo, this.request.roomName);\r\n                delete this.request;\r\n            }\r\n            // case TaskState.PRE_RUN: this.preRun();\r\n        }\r\n        if (this.request != null && oldStatus != this.request.status)\r\n            this.run();\r\n    };\r\n    return Task;\r\n}());\r\nexport { Task };\r\n//# sourceMappingURL=Task.js.map","map":{"version":3,"file":"Task.js","sourceRoot":"","sources":["../src/tasks/Task.ts"],"names":[],"mappings":"AAGA,MAAM,CAAN,IAAY,SAUX;AAVD,WAAY,SAAS;IAEpB,+CAAW,CAAA;IACX,yCAAI,CAAA;IACJ,2CAAK,CAAA;IACL,+CAAO,CAAA;IACP,yCAAI,CAAA;IACJ,uDAAW,CAAA;IACX,iDAAQ,CAAA;IACR,iDAAQ,CAAA;AACT,CAAC,EAVW,SAAS,KAAT,SAAS,QAUpB;AACD;IAcC,cAAY,QAAsB;QAEjC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;IACzB,CAAC;IAfM,aAAQ,GAAf,UAAgB,KAAgB;QAC/B,IAAG,KAAK,IAAI,SAAS,CAAC,OAAO;YAAE,OAAO,SAAS,CAAC;QAChD,IAAG,KAAK,IAAI,SAAS,CAAC,IAAI;YAAE,OAAO,MAAM,CAAC;QAC1C,IAAG,KAAK,IAAI,SAAS,CAAC,KAAK;YAAE,OAAO,OAAO,CAAC;QAC5C,IAAG,KAAK,IAAI,SAAS,CAAC,IAAI;YAAE,OAAO,MAAM,CAAC;QAC1C,IAAG,KAAK,IAAI,SAAS,CAAC,OAAO;YAAE,OAAO,SAAS,CAAC;QAChD,IAAG,KAAK,IAAI,SAAS,CAAC,WAAW;YAAE,OAAO,aAAa,CAAC;QACxD,IAAG,KAAK,IAAI,SAAS,CAAC,QAAQ;YAAE,OAAO,UAAU,CAAC;QAClD,IAAG,KAAK,IAAI,SAAS,CAAC,QAAQ;YAAE,OAAO,UAAU,CAAC;QAClD,OAAU,KAAK,mBAAgB,CAAA;IAChC,CAAC;IAaD,kBAAG,GAAH;QACC,OAAO,CAAC,GAAG,CAAC,UAAQ,IAAI,CAAC,OAAO,CAAC,IAAI,WAAM,IAAI,CAAC,OAAO,CAAC,UAAU,WAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAG,CAAC,CAAA;QAE9G,IAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,SAAS;YAAE,MAAM,uBAAuB,CAAC;QAEpF,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QACpC,QAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAC;YAC1B,0CAA0C;YAC1C,KAAK,SAAS,CAAC,IAAI;gBAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAAC,MAAM;YACxC,KAAK,SAAS,CAAC,IAAI;gBAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAAC,MAAM;YACxC,KAAK,SAAS,CAAC,KAAK;gBAAE,IAAI,CAAC,KAAK,EAAE,CAAC;gBAAC,MAAM;YAC1C,KAAK,SAAS,CAAC,WAAW;gBAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAAC,MAAM;YACnD,KAAK,SAAS,CAAC,QAAQ,CAAC,CAAC;gBACxB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;gBACzB,IAAI,CAAC,MAAM,EAAE,CAAC;gBACd,yEAAyE;gBACzE,OAAO,IAAI,CAAC,OAAO,CAAC;aACpB;YAED,yCAAyC;SACzC;QACD,IAAG,IAAI,CAAC,OAAO,IAAI,IAAI,IAAI,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM;YAAG,IAAI,CAAC,GAAG,EAAE,CAAA;IACzE,CAAC;IAEF,WAAC;AAAD,CAAC,AAjDD,IAiDC"}}
