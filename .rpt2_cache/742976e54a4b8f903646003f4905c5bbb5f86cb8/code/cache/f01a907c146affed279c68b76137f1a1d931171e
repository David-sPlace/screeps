{"code":"var StructureTaskQueue = /** @class */ (function () {\r\n    function StructureTaskQueue() {\r\n    }\r\n    StructureTaskQueue.totalCount = function (roomName, taskName) {\r\n        if (taskName === void 0) { taskName = \"\"; }\r\n        return StructureTaskQueue.activeCount(roomName, taskName)\r\n            + StructureTaskQueue.pendingCount(roomName, taskName);\r\n    };\r\n    StructureTaskQueue.pendingCount = function (roomName, taskName) {\r\n        if (taskName === void 0) { taskName = \"\"; }\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        if (taskName == \"\") {\r\n            return roomMem.activeStructureRequestCount;\r\n        }\r\n        else {\r\n            var count = 0;\r\n            var tasks = roomMem.pendingStructureRequests;\r\n            for (var id in tasks) {\r\n                var task = tasks[id];\r\n                if (task.name == taskName)\r\n                    count++;\r\n            }\r\n            return count;\r\n        }\r\n    };\r\n    StructureTaskQueue.activeCount = function (roomName, taskName) {\r\n        if (taskName === void 0) { taskName = \"\"; }\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        if (taskName == \"\") {\r\n            return roomMem.activeStructureRequestCount;\r\n        }\r\n        else {\r\n            var count = 0;\r\n            var tasks = roomMem.activeStructureRequests;\r\n            for (var task in tasks) {\r\n                var test = tasks[task];\r\n                if (test.name == taskName)\r\n                    count++;\r\n            }\r\n            return count;\r\n        }\r\n    };\r\n    StructureTaskQueue.addPending = function (taskInfo, roomName) {\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        roomMem.pendingStructureRequests.push(taskInfo);\r\n    };\r\n    StructureTaskQueue.startTask = function (buildingID, roomName) {\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        if (roomMem.pendingStructureRequests.length == 0) {\r\n            console.log(\"no pending requests.\");\r\n            return;\r\n        }\r\n        var nextTask = roomMem.pendingStructureRequests.shift();\r\n        if (nextTask != undefined) {\r\n            nextTask.assignedTo = buildingID;\r\n            roomMem.activeStructureRequests[buildingID] = nextTask;\r\n            roomMem.activeStructureRequestCount++;\r\n        }\r\n    };\r\n    StructureTaskQueue.finish = function (creepName, roomName) {\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        delete roomMem.activeStructureRequests[creepName];\r\n        roomMem.activeStructureRequestCount--;\r\n    };\r\n    StructureTaskQueue.allActive = function (roomName) {\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        return roomMem.activeStructureRequests;\r\n    };\r\n    return StructureTaskQueue;\r\n}());\r\nexport { StructureTaskQueue };\r\n//# sourceMappingURL=StructureTaskQueue.js.map","map":{"version":3,"file":"StructureTaskQueue.js","sourceRoot":"","sources":["../src/tasks/StructureTaskQueue.ts"],"names":[],"mappings":"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"}}
