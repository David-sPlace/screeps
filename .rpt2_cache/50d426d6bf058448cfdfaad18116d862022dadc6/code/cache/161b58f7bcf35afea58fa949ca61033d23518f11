{"code":"export var MemoryVersion = 0;\r\nexport function m() {\r\n    return Memory;\r\n}\r\nexport function roleToString(job) {\r\n    switch (job) {\r\n        // case CreepRoles.ROLE_BUILDER: return \"ROLE_BUILDER\";\r\n        // case CreepRoles.ROLE_MINER: return \"ROLE_MINER\";\r\n        // case CreepRoles.ROLE_MINEHAULER: return \"ROLE_MINEHAULER\";\r\n        // case CreepRoles.ROLE_HEALER: return \"ROLE_HEALER\";\r\n        // case CreepRoles.ROLE_FIGHTER: return \"ROLE_FIGHTER\";\r\n        // case CreepRoles.ROLE_RANGER: return \"ROLE_RANGER\";\r\n        // case CreepRoles.ROLE_CLAIMER: return \"ROLE_CLAIMER\";\r\n        // case CreepRoles.ROLE_REMOTEMINER: return \"ROLE_REMOTEMINER\";\r\n        // case CreepRoles.ROLE_REMOTEMINEHAULER: return \"ROLE_REMOTEMINEHAULER\";\r\n        // case CreepRoles.ROLE_CUSTOMCONTROL: return \"ROLE_CUSTOMCONTROL\";\r\n        // case CreepRoles.ROLE_UPGRADER: return \"ROLE_UPGRADER\";\r\n        case 2 /* ROLE_WORKER */: return \"ROLE_WORKER\";\r\n        case 0 /* ROLE_UNASSIGNED */: return \"ROLE_UNASSIGNED\";\r\n        case 1 /* ROLE_ALL */: return \"ROLE_ALL\";\r\n        default: return \"unknown role\";\r\n    }\r\n}\r\nexport function initRoomMemory(roomName) {\r\n    var room = Game.rooms[roomName];\r\n    var rm = m().rooms[room.name];\r\n    rm.harvestLocations = [];\r\n}\r\nexport function cleanupCreeps() {\r\n    for (var name_1 in Memory.creeps) {\r\n        if (!Game.creeps[name_1]) {\r\n            console.log(\"Clearing dead creeps from memory.\");\r\n            for (var roomName in Game.rooms) {\r\n                var room = Game.rooms[roomName];\r\n                var roomMemory = room.memory;\r\n                var sites = roomMemory.harvestLocations;\r\n                for (var id in sites) {\r\n                    var site = sites[id];\r\n                    if (site.assignedTo == name_1) {\r\n                        site.assignedTo = null;\r\n                    }\r\n                }\r\n            }\r\n            delete Memory.creeps[name_1];\r\n        }\r\n    }\r\n}\r\nvar HarvestSpot = /** @class */ (function () {\r\n    function HarvestSpot(sourceID, spot) {\r\n        this.assignedTo = null;\r\n        this.sourceID = sourceID;\r\n        this.pos = spot;\r\n    }\r\n    return HarvestSpot;\r\n}());\r\nexport { HarvestSpot };\r\n//# sourceMappingURL=memory.js.map","map":{"version":3,"file":"memory.js","sourceRoot":"","sources":["../src/utils/memory.ts"],"names":[],"mappings":"AAGA,MAAM,CAAC,IAAM,aAAa,GAAG,CAAC,CAAC;AAC/B,MAAM;IAEL,OAAO,MAA2B,CAAC;AACpC,CAAC;AA8CD,MAAM,uBAAuB,GAAe;IAE3C,QAAQ,GAAG,EACX;QACC,uDAAuD;QACvD,mDAAmD;QACnD,6DAA6D;QAC7D,qDAAqD;QACrD,uDAAuD;QACvD,qDAAqD;QACrD,uDAAuD;QACvD,+DAA+D;QAC/D,yEAAyE;QACzE,mEAAmE;QACnE,yDAAyD;QACzD,wBAA2B,CAAC,CAAC,OAAO,aAAa,CAAC;QAClD,4BAA+B,CAAC,CAAC,OAAO,iBAAiB,CAAC;QAC1D,qBAAwB,CAAC,CAAC,OAAO,UAAU,CAAC;QAC5C,OAAO,CAAC,CAAC,OAAO,cAAc,CAAC;KAC/B;AACF,CAAC;AAMD,MAAM,yBAAyB,QAAgB;IAE9C,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IAChC,IAAM,EAAE,GAAe,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAE1B,CAAC;AASD,MAAM;IAEL,KAAK,IAAM,MAAI,IAAI,MAAM,CAAC,MAAM,EAChC;QACC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAI,CAAC,EACtB;YACC,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAA;YAChD,KAAK,IAAM,QAAQ,IAAI,IAAI,CAAC,KAAK,EACjC;gBACC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAS,CAAC;gBACxC,IAAI,UAAU,GAAG,IAAI,CAAC,MAAoB,CAAC;gBAC3C,IAAI,KAAK,GAAG,UAAU,CAAC,gBAAgB,CAAC;gBACxC,KAAK,IAAI,EAAE,IAAI,KAAK,EACpB;oBACC,IAAI,IAAI,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC;oBACrB,IAAI,IAAI,CAAC,UAAU,IAAI,MAAI,EAC3B;wBACC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;qBACvB;iBACD;aACD;YACD,OAAO,MAAM,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;SAC3B;KACD;AAGF,CAAC;AAGD;IAKC,qBAAY,QAAgB,EAAE,IAAkB;QADhD,eAAU,GAAkB,IAAI,CAAC;QAGhC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAA;IAChB,CAAC;IACF,kBAAC;AAAD,CAAC,AAVD,IAUC"}}
