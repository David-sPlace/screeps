{"code":"export var TaskStatus;\r\n(function (TaskStatus) {\r\n    TaskStatus[TaskStatus[\"PENDING\"] = 0] = \"PENDING\";\r\n    TaskStatus[TaskStatus[\"INIT\"] = 1] = \"INIT\";\r\n    TaskStatus[TaskStatus[\"PREPARE\"] = 2] = \"PREPARE\";\r\n    TaskStatus[TaskStatus[\"PRE_RUN\"] = 3] = \"PRE_RUN\";\r\n    TaskStatus[TaskStatus[\"IN_PROGRESS\"] = 4] = \"IN_PROGRESS\";\r\n    TaskStatus[TaskStatus[\"POST_RUN\"] = 5] = \"POST_RUN\";\r\n    TaskStatus[TaskStatus[\"FINISHED\"] = 6] = \"FINISHED\";\r\n})(TaskStatus || (TaskStatus = {}));\r\nvar Task = /** @class */ (function () {\r\n    function Task(taskInfo) {\r\n        this.request = taskInfo;\r\n    }\r\n    Task.prototype.run = function () {\r\n        console.log(\"RUN: \" + this.request.name + \" + \" + this.request.assignedTo + \" + \" + Task.getStatus(this.request.status) + \" \");\r\n        if (Game.creeps[this.request.assignedTo] == undefined)\r\n            throw \"creep was null during run. - should handle!\";\r\n        var oldStatus = this.request.status;\r\n        switch (this.request.status) {\r\n            // case TaskState.PENDING: this.pending();\r\n            case TaskStatus.INIT:\r\n                this.init();\r\n                break;\r\n            case TaskStatus.PREPARE:\r\n                this.prepare();\r\n                break;\r\n            //case TaskStatus.PRE_RUN: this.p(); break;\r\n            case TaskStatus.IN_PROGRESS:\r\n                this.continue();\r\n                break;\r\n            case TaskStatus.FINISHED:\r\n                console.log(\"finishing.\");\r\n                this.finish();\r\n                delete this.request;\r\n                break;\r\n            // case TaskState.PRE_RUN: this.preRun();\r\n        }\r\n        if (this.request != null && oldStatus != this.request.status)\r\n            this.run();\r\n    };\r\n    Task.getStatus = function (state) {\r\n        if (state == TaskStatus.PENDING)\r\n            return \"PENDING\";\r\n        if (state == TaskStatus.INIT)\r\n            return \"INIT\";\r\n        if (state == TaskStatus.PREPARE)\r\n            return \"START\";\r\n        if (state == TaskStatus.PRE_RUN)\r\n            return \"PRE_RUN\";\r\n        if (state == TaskStatus.IN_PROGRESS)\r\n            return \"IN_PROGRESS\";\r\n        if (state == TaskStatus.POST_RUN)\r\n            return \"POST_RUN\";\r\n        if (state == TaskStatus.FINISHED)\r\n            return \"FINISHED\";\r\n        return state + \" is unknown...\";\r\n    };\r\n    return Task;\r\n}());\r\nexport { Task };\r\n//# sourceMappingURL=Task.js.map","map":{"version":3,"file":"Task.js","sourceRoot":"","sources":["../src/tasks/Task.ts"],"names":[],"mappings":"AAGA,MAAM,CAAN,IAAY,UAQX;AARD,WAAY,UAAU;IACpB,iDAAW,CAAA;IACX,2CAAI,CAAA;IACJ,iDAAO,CAAA;IACP,iDAAO,CAAA;IACP,yDAAW,CAAA;IACX,mDAAQ,CAAA;IACR,mDAAQ,CAAA;AACV,CAAC,EARW,UAAU,KAAV,UAAU,QAQrB;AACD;IAGE,cAAY,QAAsB;QAChC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;IAC1B,CAAC;IAOM,kBAAG,GAAV;QACE,OAAO,CAAC,GAAG,CAAC,UAAQ,IAAI,CAAC,OAAO,CAAC,IAAI,WAAM,IAAI,CAAC,OAAO,CAAC,UAAU,WAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAG,CAAC,CAAA;QAE/G,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,SAAS;YAAE,MAAM,6CAA6C,CAAC;QAE3G,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QACpC,QAAQ,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YAC3B,0CAA0C;YAC1C,KAAK,UAAU,CAAC,IAAI;gBAAE,IAAI,CAAC,IAAI,EAAE,CAAC;gBAAC,MAAM;YACzC,KAAK,UAAU,CAAC,OAAO;gBAAE,IAAI,CAAC,OAAO,EAAE,CAAC;gBAAC,MAAM;YAC/C,2CAA2C;YAC3C,KAAK,UAAU,CAAC,WAAW;gBAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAAC,MAAM;YACpD,KAAK,UAAU,CAAC,QAAQ;gBACtB,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;gBACzB,IAAI,CAAC,MAAM,EAAE,CAAC;gBACd,OAAO,IAAI,CAAC,OAAO,CAAC;gBACpB,MAAM;YACR,yCAAyC;SAC1C;QACD,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,IAAI,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM;YAAE,IAAI,CAAC,GAAG,EAAE,CAAA;IAC1E,CAAC;IACM,cAAS,GAAhB,UAAiB,KAAiB;QAChC,IAAI,KAAK,IAAI,UAAU,CAAC,OAAO;YAAE,OAAO,SAAS,CAAC;QAClD,IAAI,KAAK,IAAI,UAAU,CAAC,IAAI;YAAE,OAAO,MAAM,CAAC;QAC5C,IAAI,KAAK,IAAI,UAAU,CAAC,OAAO;YAAE,OAAO,OAAO,CAAC;QAChD,IAAI,KAAK,IAAI,UAAU,CAAC,OAAO;YAAE,OAAO,SAAS,CAAC;QAClD,IAAI,KAAK,IAAI,UAAU,CAAC,WAAW;YAAE,OAAO,aAAa,CAAC;QAC1D,IAAI,KAAK,IAAI,UAAU,CAAC,QAAQ;YAAE,OAAO,UAAU,CAAC;QACpD,IAAI,KAAK,IAAI,UAAU,CAAC,QAAQ;YAAE,OAAO,UAAU,CAAC;QACpD,OAAU,KAAK,mBAAgB,CAAA;IACjC,CAAC;IACH,WAAC;AAAD,CAAC,AA3CD,IA2CC"}}
