{"code":"import { ErrorMapper } from \"utils/ErrorMapper\";\r\nimport * as Mem from \"utils/Utils\";\r\nimport { RoomManager } from \"RoomManager\";\r\nvar roomManager = new RoomManager();\r\nfunction memoryInit() {\r\n    console.log(\"initing game\");\r\n    delete Memory.flags;\r\n    delete Memory.spawns;\r\n    delete Memory.creeps;\r\n    delete Memory.rooms;\r\n    var mem = Mem.m();\r\n    mem.creeps = {};\r\n    mem.rooms = {};\r\n    mem.uuid = 0;\r\n    mem.memVersion = Mem.MemoryVersion;\r\n}\r\nfunction InitializeGame() {\r\n    if (Mem.m().memVersion === undefined ||\r\n        Mem.m().memVersion !== Mem.MemoryVersion) {\r\n        memoryInit();\r\n    }\r\n    if (!Mem.m().uuid || Mem.m().uuid > 1000) {\r\n        Mem.m().uuid = 0;\r\n    }\r\n}\r\nfunction mainLoop() {\r\n    InitializeGame();\r\n    for (var i in Game.rooms) {\r\n        var room = Game.rooms[i];\r\n        var mem = Mem.m();\r\n        var roomMemory = mem.rooms[room.name];\r\n        if (roomMemory === undefined) {\r\n            console.log(\"Init room memory for \" + room.name + \".\");\r\n            Memory.rooms[room.name] = {};\r\n            RoomManager.initRoomMemory(room);\r\n            roomMemory = mem.rooms[room.name];\r\n        }\r\n        roomManager.Run(room, roomMemory);\r\n    }\r\n    Mem.Utils.cleanupCreeps();\r\n}\r\nexport var loop = ErrorMapper.wrapLoop(mainLoop);\r\n//# sourceMappingURL=main.js.map","map":{"version":3,"file":"main.js","sourceRoot":"","sources":["src/main.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,KAAK,GAAG,MAAM,aAAa,CAAC;AACnC,OAAO,EAAE,WAAW,EAAE,MAAM,aAAa,CAAC;AAE1C,IAAM,WAAW,GAAG,IAAI,WAAW,EAAE,CAAC;AACtC;IAEC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;IAC5B,OAAO,MAAM,CAAC,KAAK,CAAC;IACpB,OAAO,MAAM,CAAC,MAAM,CAAC;IACrB,OAAO,MAAM,CAAC,MAAM,CAAC;IACrB,OAAO,MAAM,CAAC,KAAK,CAAC;IAEpB,IAAM,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC;IACpB,GAAG,CAAC,MAAM,GAAG,EAAE,CAAC;IAChB,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC;IAEf,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC;IACb,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC,aAAa,CAAC;AACpC,CAAC;AACD;IAEC,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,UAAU,KAAK,SAAS;QACnC,GAAG,CAAC,CAAC,EAAE,CAAC,UAAU,KAAK,GAAG,CAAC,aAAa,EACzC;QACC,UAAU,EAAE,CAAC;KACb;IACD,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,GAAG,IAAI,EACxC;QACC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC;KACjB;AACF,CAAC;AACD;IAEC,cAAc,EAAE,CAAC;IAEjB,KAAK,IAAM,CAAC,IAAI,IAAI,CAAC,KAAK,EAC1B;QACC,IAAM,IAAI,GAAS,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC,EAAoB,CAAC;QACpC,IAAI,UAAU,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAmB,CAAC;QACxD,IAAI,UAAU,KAAK,SAAS,EAC5B;YACC,OAAO,CAAC,GAAG,CAAC,0BAAwB,IAAI,CAAC,IAAI,MAAG,CAAC,CAAC;YAClD,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;YAC7B,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YACjC,UAAU,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAmB,CAAC;SACpD;QAED,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;KAClC;IAED,GAAG,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;AAC3B,CAAC;AAGD,MAAM,CAAC,IAAM,IAAI,GAAG,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC"}}
