{"code":"export var MemoryVersion = 0;\r\nexport function m() {\r\n    return Memory;\r\n}\r\nexport function initRoomMemory(roomName) {\r\n    var room = Game.rooms[roomName];\r\n    var rm = m().rooms[room.name];\r\n    rm.harvestLocations = [];\r\n    rm.runningWorkerTasks = [];\r\n    rm.test = [];\r\n    rm.activeWorkerTaskCount = 0;\r\n    rm.activeStructureRequestCount = 0;\r\n    rm.activeWorkerRequests = {};\r\n    rm.pendingWorkerRequests = [];\r\n    rm.activeStructureRequests = {};\r\n    rm.pendingStructureRequests = [];\r\n    rm.smartStructures = [];\r\n}\r\nexport function cleanupCreeps() {\r\n    for (var name_1 in Memory.creeps) {\r\n        if (!Game.creeps[name_1]) {\r\n            console.log(\"Clearing dead creeps from memory.\");\r\n            for (var roomName in Game.rooms) {\r\n                var room = Game.rooms[roomName];\r\n                var roomMemory = room.memory;\r\n                var sites = roomMemory.harvestLocations;\r\n                for (var id in sites) {\r\n                    var site = sites[id];\r\n                    if (site.assignedTo == name_1) {\r\n                        console.log(\"unassiging harvest spot for \" + name_1 + \" source: \" + site.sourceID);\r\n                        site.assignedTo = null;\r\n                    }\r\n                }\r\n            }\r\n            delete Memory.creeps[name_1];\r\n        }\r\n    }\r\n}\r\nvar HarvestSource = /** @class */ (function () {\r\n    function HarvestSource(sourceID, roomName) {\r\n        this.assignedTo = null;\r\n        this.sourceID = sourceID;\r\n        this.roomName = roomName;\r\n    }\r\n    return HarvestSource;\r\n}());\r\nexport { HarvestSource };\r\n// export class HarvestSpot\r\n// {\r\n// \tsourceID: string;\r\n// \tpos: RoomPosition;\r\n// \tassignedTo: string | null = null;\r\n// \tconstructor(sourceID: string, spot: RoomPosition)\r\n// \t{\r\n// \t\tthis.sourceID = sourceID;\r\n// \t\tthis.pos = spot\r\n// \t}\r\n// }\r\n//# sourceMappingURL=memory.js.map","map":{"version":3,"file":"memory.js","sourceRoot":"","sources":["../src/utils/memory.ts"],"names":[],"mappings":"AAIA,MAAM,CAAC,IAAM,aAAa,GAAG,CAAC,CAAC;AAC/B,MAAM;IAEL,OAAO,MAA2B,CAAC;AACpC,CAAC;AAgDD,MAAM,yBAAyB,QAAgB;IAE9C,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IAChC,IAAM,EAAE,GAAe,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,EAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC;IACzB,EAAE,CAAC,kBAAkB,GAAG,EAAE,CAAC;IAC3B,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC;IACb,EAAE,CAAC,qBAAqB,GAAG,CAAC,CAAC;IAC7B,EAAE,CAAC,2BAA2B,GAAG,CAAC,CAAC;IACnC,EAAE,CAAC,oBAAoB,GAAG,EAAE,CAAC;IAC7B,EAAE,CAAC,qBAAqB,GAAG,EAAE,CAAC;IAC9B,EAAE,CAAC,uBAAuB,GAAG,EAAE,CAAC;IAChC,EAAE,CAAC,wBAAwB,GAAG,EAAE,CAAA;IAChC,EAAE,CAAC,eAAe,GAAG,EAAE,CAAC;AAEzB,CAAC;AAgBD,MAAM;IAEL,KAAK,IAAM,MAAI,IAAI,MAAM,CAAC,MAAM,EAChC;QACC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAI,CAAC,EACtB;YACC,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAA;YAChD,KAAK,IAAM,QAAQ,IAAI,IAAI,CAAC,KAAK,EACjC;gBACC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAS,CAAC;gBACxC,IAAI,UAAU,GAAG,IAAI,CAAC,MAAoB,CAAC;gBAC3C,IAAI,KAAK,GAAG,UAAU,CAAC,gBAAgB,CAAC;gBACxC,KAAK,IAAI,EAAE,IAAI,KAAK,EACpB;oBACC,IAAI,IAAI,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC;oBACrB,IAAI,IAAI,CAAC,UAAU,IAAI,MAAI,EAC3B;wBACC,OAAO,CAAC,GAAG,CAAC,8BAA8B,GAAG,MAAI,GAAG,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;wBAChF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;qBACvB;iBACD;aACD;YACD,OAAO,MAAM,CAAC,MAAM,CAAC,MAAI,CAAC,CAAC;SAC3B;KACD;AAGF,CAAC;AACD;IAIC,uBAAY,QAAgB,EAAE,QAAgB;QAD9C,eAAU,GAAkB,IAAI,CAAC;QAEhC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC1B,CAAC;IACF,oBAAC;AAAD,CAAC,AARD,IAQC;;AAED,2BAA2B;AAC3B,IAAI;AACJ,qBAAqB;AACrB,sBAAsB;AACtB,qCAAqC;AACrC,qDAAqD;AACrD,KAAK;AACL,8BAA8B;AAC9B,oBAAoB;AACpB,KAAK;AACL,IAAI"}}
