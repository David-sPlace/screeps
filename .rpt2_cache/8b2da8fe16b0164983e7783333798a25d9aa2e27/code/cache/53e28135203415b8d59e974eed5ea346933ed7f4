{"code":"import * as tslib_1 from \"tslib\";\r\nimport { WorkerTask, WorkerTaskDTO } from \"abstract/workerTask\";\r\nvar BuildTaskDTO = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BuildTaskDTO, _super);\r\n    function BuildTaskDTO(roomName, siteID) {\r\n        var _this = _super.call(this, roomName) || this;\r\n        _this.wingDing = \"\\uD83D\\uDEA7\";\r\n        _this.name = \"Build\";\r\n        _this.maxConcurrentCount = 2;\r\n        _this.siteID = siteID;\r\n        return _this;\r\n    }\r\n    return BuildTaskDTO;\r\n}(WorkerTaskDTO));\r\nexport { BuildTaskDTO };\r\nvar RepairTaskDTO = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RepairTaskDTO, _super);\r\n    function RepairTaskDTO(roomName, siteID) {\r\n        var _this = _super.call(this, roomName) || this;\r\n        _this.wingDing = \"\\uD83D\\uDEA7\";\r\n        _this.name = \"Repair\";\r\n        _this.maxConcurrentCount = 6;\r\n        _this.siteID = siteID;\r\n        return _this;\r\n    }\r\n    return RepairTaskDTO;\r\n}(WorkerTaskDTO));\r\nexport { RepairTaskDTO };\r\nvar RepairTask = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RepairTask, _super);\r\n    function RepairTask(taskInfo) {\r\n        var _this = _super.call(this, taskInfo) || this;\r\n        _this.taskInfo = taskInfo;\r\n        return _this;\r\n    }\r\n    RepairTask.prototype.doWork = function (creepID, context) {\r\n        var site = Game.getObjectById(this.taskInfo.siteID);\r\n        var creep = Game.getObjectById(creepID);\r\n        if (site == null) {\r\n            console.log(\"site was null...\");\r\n            this.taskInfo.finished = true;\r\n            return;\r\n        }\r\n        var progressLeft = site.hitsMax - site.hits;\r\n        if (creep.repair(site) == ERR_NOT_IN_RANGE) {\r\n            creep.moveTo(site, { visualizePathStyle: { stroke: '#ffffff' } });\r\n        }\r\n        else if (progressLeft == 0) {\r\n            console.log(\"progress left was 0\");\r\n            this.taskInfo.finished = true;\r\n        }\r\n        progressLeft = site.hitsMax - site.hits;\r\n    };\r\n    return RepairTask;\r\n}(WorkerTask));\r\nexport { RepairTask };\r\nvar BuildTask = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BuildTask, _super);\r\n    function BuildTask(taskInfo) {\r\n        var _this = _super.call(this, taskInfo) || this;\r\n        _this.taskInfo = taskInfo;\r\n        return _this;\r\n    }\r\n    BuildTask.prototype.doWork = function (creepID, context) {\r\n        var site = Game.getObjectById(this.taskInfo.siteID);\r\n        var creep = Game.getObjectById(creepID);\r\n        if (site == null) {\r\n            console.log(\"site was null...\");\r\n            this.taskInfo.finished = true;\r\n            return;\r\n        }\r\n        var progressLeft = site.progressTotal - site.progress;\r\n        if (creep.build(site) == ERR_NOT_IN_RANGE) {\r\n            creep.moveTo(site, { visualizePathStyle: { stroke: '#ffffff' } });\r\n        }\r\n        else if (progressLeft == 0) {\r\n            console.log(\"progress left was 0\");\r\n            this.taskInfo.finished = true;\r\n        }\r\n        progressLeft = site.progressTotal - site.progress;\r\n    };\r\n    return BuildTask;\r\n}(WorkerTask));\r\nexport { BuildTask };\r\n//# sourceMappingURL=BuildTask.js.map","map":{"version":3,"file":"BuildTask.js","sourceRoot":"","sources":["../src/tasks/BuildTask.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,aAAa,EAAE,MAAM,qBAAqB,CAAC;AAGhE;IAAkC,wCAAa;IAM9C,sBAAY,QAAgB,EAAE,MAAc;QAA5C,YACC,kBAAM,QAAQ,CAAC,SAEf;QAPD,cAAQ,GAAG,cAAI,CAAC;QAChB,UAAI,GAAG,OAAO,CAAC;QACf,wBAAkB,GAAG,CAAC,CAAC;QAItB,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;IACtB,CAAC;IACF,mBAAC;AAAD,CAAC,AAVD,CAAkC,aAAa,GAU9C;;AACD;IAAmC,yCAAa;IAK/C,uBAAY,QAAgB,EAAE,MAAc;QAA5C,YACC,kBAAM,QAAQ,CAAC,SAEf;QAPD,cAAQ,GAAG,cAAI,CAAC;QAChB,UAAI,GAAG,QAAQ,CAAC;QAChB,wBAAkB,GAAG,CAAC,CAAC;QAItB,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;IACtB,CAAC;IACF,oBAAC;AAAD,CAAC,AATD,CAAmC,aAAa,GAS/C;;AACD;IAAgC,sCAAU;IAGzC,oBAAY,QAAsB;QAAlC,YAEC,kBAAM,QAAyB,CAAC,SAEhC;QADA,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;;IAC1B,CAAC;IAED,2BAAM,GAAN,UAAO,OAAe,EAAE,OAAY;QAGnC,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAc,CAAC;QAEjE,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAU,CAAC;QACjD,IAAI,IAAI,IAAI,IAAI,EAChB;YACC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC9B,OAAO;SACP;QAED,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,GAAE,IAAI,CAAC,IAAI,CAAC;QAC3C,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,gBAAgB,EAC1C;YACC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,kBAAkB,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;SAClE;aACI,IAAI,YAAY,IAAI,CAAC,EAC1B;YACC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;YACnC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC9B;QACD,YAAY,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;IAEzC,CAAC;IACF,iBAAC;AAAD,CAAC,AAnCD,CAAgC,UAAU,GAmCzC;;AAED;IAA+B,qCAAU;IAGxC,mBAAY,QAAsB;QAAlC,YAEC,kBAAM,QAAyB,CAAC,SAEhC;QADA,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;;IAC1B,CAAC;IAED,0BAAM,GAAN,UAAO,OAAe,EAAE,OAAY;QAGnC,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAqB,CAAC;QAExE,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAU,CAAC;QACjD,IAAI,IAAI,IAAI,IAAI,EAChB;YACC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC9B,OAAO;SACP;QACD,IAAI,YAAY,GAAG,IAAI,CAAC,aAAa,GAAE,IAAI,CAAC,QAAQ,CAAC;QACrD,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,gBAAgB,EACzC;YACC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,kBAAkB,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;SAClE;aACI,IAAI,YAAY,IAAI,CAAC,EAC1B;YACC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;YACnC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC9B;QACD,YAAY,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC;IAEnD,CAAC;IAEF,gBAAC;AAAD,CAAC,AAnCD,CAA+B,UAAU,GAmCxC"}}
