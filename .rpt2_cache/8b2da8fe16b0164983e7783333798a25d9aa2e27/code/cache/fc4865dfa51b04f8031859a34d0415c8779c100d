{"code":"import * as tslib_1 from \"tslib\";\r\nimport { WorkerTask, WorkerTaskDTO } from \"abstract/WorkerTask\";\r\nvar RestockTaskDTO = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RestockTaskDTO, _super);\r\n    function RestockTaskDTO(roomName, controllerID) {\r\n        var _this = _super.call(this, roomName) || this;\r\n        _this.wingDing = \"\\uD83D\\uDED2\";\r\n        _this.name = \"Restock\";\r\n        _this.maxConcurrentCount = 5;\r\n        _this.controllerID = controllerID;\r\n        return _this;\r\n    }\r\n    return RestockTaskDTO;\r\n}(WorkerTaskDTO));\r\nexport { RestockTaskDTO };\r\nvar RestockTask = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RestockTask, _super);\r\n    function RestockTask(taskInfo) {\r\n        var _this = _super.call(this, taskInfo) || this;\r\n        _this.taskInfo = taskInfo;\r\n        return _this;\r\n    }\r\n    RestockTask.prototype.doWork = function (creepID, context) {\r\n        var creep = Game.getObjectById(creepID);\r\n        if (creep.carry.energy == 0) {\r\n            console.log(\"A creep finished restocking!\");\r\n            this.taskInfo.finished = true;\r\n        }\r\n        var targets = creep.room.find(FIND_STRUCTURES, {\r\n            filter: function (structure) {\r\n                return (structure.structureType == STRUCTURE_EXTENSION || structure.structureType == STRUCTURE_SPAWN) &&\r\n                    structure.energy < structure.energyCapacity;\r\n            }\r\n        });\r\n        if (targets.length > 0) {\r\n            if (creep.transfer(targets[0], RESOURCE_ENERGY) == ERR_NOT_IN_RANGE) {\r\n                creep.moveTo(targets[0], { visualizePathStyle: { stroke: '#ffffff' } });\r\n            }\r\n        }\r\n    };\r\n    return RestockTask;\r\n}(WorkerTask));\r\nexport { RestockTask };\r\n//# sourceMappingURL=RestockTask.js.map","map":{"version":3,"file":"RestockTask.js","sourceRoot":"","sources":["../src/tasks/RestockTask.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,aAAa,EAAE,MAAM,qBAAqB,CAAC;AAEhE;IAAoC,0CAAa;IAKhD,wBAAY,QAAgB,EAAE,YAAoB;QAAlD,YACC,kBAAM,QAAQ,CAAC,SAEf;QAPD,cAAQ,GAAG,cAAI,CAAC;QAChB,UAAI,GAAG,SAAS,CAAC;QACjB,wBAAkB,GAAG,CAAC,CAAC;QAItB,KAAI,CAAC,YAAY,GAAG,YAAY,CAAC;;IAClC,CAAC;IACF,qBAAC;AAAD,CAAC,AATD,CAAoC,aAAa,GAShD;;AACD;IAAiC,uCAAU;IAG1C,qBAAY,QAAwB;QAApC,YAEC,kBAAM,QAAyB,CAAC,SAEhC;QADA,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;;IAC1B,CAAC;IAED,4BAAM,GAAN,UAAO,OAAe,EAAE,OAAY;QAEnC,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAU,CAAC;QAEjD,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAC3B;YACC,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;YAC5C,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC9B;QACD,IAAI,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YAC9C,MAAM,EAAE,UAAC,SAAS;gBAEjB,OAAO,CAAC,SAAS,CAAC,aAAa,IAAI,mBAAmB,IAAI,SAAS,CAAC,aAAa,IAAI,eAAe,CAAC;oBACpG,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,cAAc,CAAC;YAC9C,CAAC;SACD,CAAC,CAAC;QACH,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EACtB;YACC,IAAI,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,IAAI,gBAAgB,EACnE;gBACC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,kBAAkB,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;aACxE;SACD;IAEF,CAAC;IACF,kBAAC;AAAD,CAAC,AAlCD,CAAiC,UAAU,GAkC1C"}}
