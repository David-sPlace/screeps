{"code":"var CreepTaskQueue = /** @class */ (function () {\r\n    function CreepTaskQueue() {\r\n    }\r\n    CreepTaskQueue.totalCount = function (roomName, taskName) {\r\n        if (taskName === void 0) { taskName = \"\"; }\r\n        return CreepTaskQueue.activeCount(roomName, taskName)\r\n            + CreepTaskQueue.pendingCount(roomName, taskName);\r\n    };\r\n    CreepTaskQueue.pendingCount = function (roomName, taskName) {\r\n        if (taskName === void 0) { taskName = \"\"; }\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        if (taskName == \"\") {\r\n            return roomMem.pendingWorkerRequests.length;\r\n        }\r\n        else {\r\n            var count = 0;\r\n            var tasks = roomMem.pendingWorkerRequests;\r\n            for (var id in tasks) {\r\n                var task = tasks[id];\r\n                if (task.name == taskName)\r\n                    count++;\r\n            }\r\n            return count;\r\n        }\r\n    };\r\n    CreepTaskQueue.activeCount = function (roomName, taskName) {\r\n        if (taskName === void 0) { taskName = \"\"; }\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        if (taskName == \"\") {\r\n            return roomMem.activeWorkerTaskCount;\r\n        }\r\n        else {\r\n            var count = 0;\r\n            var tasks = roomMem.activeWorkerRequests;\r\n            for (var task in tasks) {\r\n                var test = tasks[task];\r\n                if (test.name == taskName)\r\n                    count++;\r\n            }\r\n            return count;\r\n        }\r\n    };\r\n    CreepTaskQueue.addPending = function (request) {\r\n        var roomMem = Game.rooms[request.roomName].memory;\r\n        roomMem.pendingWorkerRequests.push(request);\r\n    };\r\n    CreepTaskQueue.start = function (creepName, roomName) {\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        if (roomMem.pendingWorkerRequests.length == 0)\r\n            return;\r\n        var nextTask = roomMem.pendingWorkerRequests.shift();\r\n        if (nextTask != undefined) {\r\n            //console.log(nextTask);\r\n            nextTask.assignedTo = creepName;\r\n            roomMem.test[0] = nextTask;\r\n            roomMem.activeWorkerRequests[creepName] = nextTask;\r\n            roomMem.activeWorkerTaskCount++;\r\n        }\r\n    };\r\n    CreepTaskQueue.finish = function (creepName, roomName) {\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        delete roomMem.activeWorkerRequests[creepName];\r\n        roomMem.activeWorkerTaskCount--;\r\n    };\r\n    CreepTaskQueue.allActive = function (roomName) {\r\n        var roomMem = Game.rooms[roomName].memory;\r\n        return roomMem.activeWorkerRequests;\r\n    };\r\n    CreepTaskQueue.count = function (roomName) {\r\n    };\r\n    return CreepTaskQueue;\r\n}());\r\nexport { CreepTaskQueue };\r\n//# sourceMappingURL=CreepTaskQueue.js.map","map":{"version":3,"file":"CreepTaskQueue.js","sourceRoot":"","sources":["../src/tasks/CreepTaskQueue.ts"],"names":[],"mappings":"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"}}
