{"code":"import * as tslib_1 from \"tslib\";\r\nimport { WorkerTask, WorkerTaskInfo } from \"abstract/WorkerTask\";\r\nvar RestockTaskInfo = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RestockTaskInfo, _super);\r\n    function RestockTaskInfo(roomName, restockID) {\r\n        var _this = _super.call(this, roomName) || this;\r\n        _this.wingDing = \"\\uD83D\\uDED2\";\r\n        _this.name = \"Restock\";\r\n        _this.maxConcurrentCount = 5;\r\n        _this.restockTargetID = restockID;\r\n        return _this;\r\n    }\r\n    return RestockTaskInfo;\r\n}(WorkerTaskInfo));\r\nexport { RestockTaskInfo };\r\nvar RestockTask = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RestockTask, _super);\r\n    function RestockTask(taskInfo) {\r\n        var _this = _super.call(this, taskInfo) || this;\r\n        _this.taskInfo = taskInfo;\r\n        return _this;\r\n    }\r\n    RestockTask.prototype.doWork = function () {\r\n        var creep = Game.creeps[this.taskInfo.assignedCreepName];\r\n        var targets = creep.room.find(FIND_STRUCTURES, {\r\n            filter: function (structure) {\r\n                return (structure.structureType == STRUCTURE_EXTENSION || structure.structureType == STRUCTURE_SPAWN) &&\r\n                    structure.energy < structure.energyCapacity;\r\n            }\r\n        });\r\n        if (creep.carry.energy == 0 || targets.length == 0) {\r\n            this.taskInfo.finished = true;\r\n        }\r\n        if (creep.transfer(targets[0], RESOURCE_ENERGY) == ERR_NOT_IN_RANGE) {\r\n            creep.moveTo(targets[0], { visualizePathStyle: { stroke: '#ffffff' } });\r\n        }\r\n    };\r\n    return RestockTask;\r\n}(WorkerTask));\r\nexport { RestockTask };\r\n//# sourceMappingURL=RestockTask.js.map","map":{"version":3,"file":"RestockTask.js","sourceRoot":"","sources":["../src/tasks/RestockTask.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AAEjE;IAAqC,2CAAc;IAMlD,yBAAY,QAAgB,EAAE,SAAiB;QAA/C,YAEC,kBAAM,QAAQ,CAAC,SAEf;QARD,cAAQ,GAAG,cAAI,CAAC;QAChB,UAAI,GAAG,SAAS,CAAC;QACjB,wBAAkB,GAAG,CAAC,CAAC;QAKtB,KAAI,CAAC,eAAe,GAAG,SAAS,CAAC;;IAClC,CAAC;IACF,sBAAC;AAAD,CAAC,AAXD,CAAqC,cAAc,GAWlD;;AACD;IAAiC,uCAAU;IAG1C,qBAAY,QAAyB;QAArC,YAEC,kBAAM,QAA0B,CAAC,SAEjC;QADA,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;;IAC1B,CAAC;IAED,4BAAM,GAAN;QAEC,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAU,CAAC;QAClE,IAAI,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YAC9C,MAAM,EAAE,UAAC,SAAS;gBAEjB,OAAO,CAAC,SAAS,CAAC,aAAa,IAAI,mBAAmB,IAAI,SAAS,CAAC,aAAa,IAAI,eAAe,CAAC;oBACpG,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,cAAc,CAAC;YAC9C,CAAC;SACD,CAAC,CAAC;QACH,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAClD;YACC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC;SAC9B;QACD,IAAI,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,IAAI,gBAAgB,EACnE;YACC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,kBAAkB,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;SACxE;IAEF,CAAC;IACF,kBAAC;AAAD,CAAC,AA7BD,CAAiC,UAAU,GA6B1C"}}
