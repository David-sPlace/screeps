{"code":"import { RoomManager } from \"RoomManager\";\r\nvar CreepTask = /** @class */ (function () {\r\n    function CreepTask(room) {\r\n        this.started = false;\r\n        this.finished = false;\r\n        this.assignedCreepName = \"\";\r\n        this.room = room;\r\n        //this.controller = controller;\r\n        this.timeRequested = Game.time;\r\n        this.roomMemory = room.memory;\r\n    }\r\n    CreepTask.prototype.start = function (creep, context) {\r\n        console.log(creep.name + \" is starting task \" + this.name);\r\n        var creepMem = creep.memory;\r\n        this.assignedCreepName = creep.name;\r\n        creepMem.currentTask = this.name;\r\n        this.started = true;\r\n        creepMem.idle = false;\r\n    };\r\n    CreepTask.prototype.continue = function (creep, context) {\r\n        //console.log(\"Upgrade task: continue\");\r\n        if (this.assignedCreepName == \"\") {\r\n            console.log(\"cant continue, don't have a creep.\");\r\n            return;\r\n        }\r\n        // else\r\n        // {\r\n        // \tconsole.log(`processing existing task for ${creep.name}`)\r\n        // }\r\n        //console.log(\"found \" + creep.name);\r\n        this.doWork(creep, context);\r\n    };\r\n    CreepTask.prototype.finish = function (creep, context) {\r\n        if (creep !== undefined) {\r\n            creep.say(\"Finished!\");\r\n            var mem = creep.memory;\r\n            mem.idle = true;\r\n            mem.currentTask = \"\";\r\n        }\r\n        this.finished = true;\r\n        //var timeTaken = Game.time - this.timeRequested\r\n        //console.log(`Time taken for ${this.name}: ${timeTaken}`);\r\n    };\r\n    CreepTask.prototype.collect = function (creep, sayText, energyFullCallback) {\r\n        var spot = RoomManager.GetClosestOpenHarvestingLocation(creep);\r\n        if (creep.carry.energy < creep.carryCapacity) {\r\n            creep.say(\"\\uD83D\\uDD04\" + sayText);\r\n            if (spot != undefined) {\r\n                var test = Game.getObjectById(spot.sourceID);\r\n                if (creep.harvest(test) == ERR_NOT_IN_RANGE) {\r\n                    creep.moveTo(spot.spot.x, spot.spot.y, { visualizePathStyle: { stroke: '#ffaa00' } });\r\n                }\r\n            }\r\n            else {\r\n                console.log(\"spot was undefined...\");\r\n            }\r\n        }\r\n        else {\r\n            console.log(spot.assignedTo + \"has been unassigned.\");\r\n            spot.assignedTo = null;\r\n            energyFullCallback();\r\n        }\r\n    };\r\n    return CreepTask;\r\n}());\r\nexport { CreepTask };\r\n//# sourceMappingURL=CreepTask.js.map","map":{"version":3,"file":"CreepTask.js","sourceRoot":"","sources":["../src/tasks/CreepTask.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,WAAW,EAAE,MAAM,aAAa,CAAC;AAE1C;IAQC,mBAAY,IAAU;QAwEtB,YAAO,GAAY,KAAK,CAAC;QACzB,aAAQ,GAAY,KAAK,CAAC;QAI1B,sBAAiB,GAAW,EAAE,CAAC;QA3E9B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,+BAA+B;QAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAoB,CAAC;IAC7C,CAAC;IACD,yBAAK,GAAL,UAAM,KAAY,EAAE,OAAY;QAE/B,OAAO,CAAC,GAAG,CAAI,KAAK,CAAC,IAAI,0BAAqB,IAAI,CAAC,IAAM,CAAC,CAAA;QAE1D,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAqB,CAAC;QAC3C,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,IAAI,CAAA;QACnC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAC;IACvB,CAAC;IACD,4BAAQ,GAAR,UAAS,KAAY,EAAE,OAAY;QAElC,wCAAwC;QACxC,IAAI,IAAI,CAAC,iBAAiB,IAAI,EAAE,EAChC;YACC,OAAO,CAAC,GAAG,CAAC,oCAAoC,CAAC,CAAA;YACjD,OAAO;SACP;QACD,OAAO;QACP,IAAI;QACJ,6DAA6D;QAC7D,IAAI;QACJ,qCAAqC;QACrC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IAC7B,CAAC;IACD,0BAAM,GAAN,UAAO,KAAY,EAAE,OAAY;QAEhC,IAAI,KAAK,KAAK,SAAS,EACvB;YACC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAA;YACtB,IAAI,GAAG,GAAG,KAAK,CAAC,MAAqB,CAAC;YACtC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;YAChB,GAAG,CAAC,WAAW,GAAG,EAAE,CAAC;SACrB;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,gDAAgD;QAChD,2DAA2D;IAC5D,CAAC;IACS,2BAAO,GAAjB,UAAkB,KAAY,EAAE,OAAe,EAAE,kBAA4B;QAE5E,IAAM,IAAI,GAAG,WAAW,CAAC,gCAAgC,CAAC,KAAK,CAAgB,CAAC;QAChF,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,aAAa,EAC5C;YACC,KAAK,CAAC,GAAG,CAAC,iBAAK,OAAS,CAAC,CAAC;YAE1B,IAAI,IAAI,IAAI,SAAS,EACrB;gBACC,IAAI,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAW,CAAA;gBACtD,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,gBAAgB,EAC3C;oBACC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,kBAAkB,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;iBACtF;aACD;iBACG;gBACH,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;aACrC;SACD;aAED;YACC,OAAO,CAAC,GAAG,CAAE,IAAI,CAAC,UAAU,GAAG,sBAAsB,CAAC,CAAA;YACtD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,kBAAkB,EAAE,CAAC;SACrB;IACF,CAAC;IAQF,gBAAC;AAAD,CAAC,AAtFD,IAsFC"}}
